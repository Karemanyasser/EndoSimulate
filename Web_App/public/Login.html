<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- SEO Meta Tags -->
<meta name="description" content="Description">
<meta name="author" content="Author">

    <!-- OG Meta Tags to improve the way the post looks when you share the page on Facebook, Twitter, LinkedIn -->
	<meta property="og:site_name" content="" /> <!-- website name -->
	<meta property="og:site" content="" /> <!-- website link -->
	<meta property="og:title" content=""/> <!-- title shown in the actual shared post -->
	<meta property="og:description" content="" /> <!-- description shown in the actual shared post -->
	<meta property="og:image" content="" /> <!-- image link, make sure it's jpg -->
	<meta property="og:url" content="" /> <!-- where do you want your post to link to -->
	<meta name="twitter:card" content="summary_large_image"> <!-- to have large image post format in Twitter -->

  <!-- Webpage Title -->
  <title>Login | EndoSimulate</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
  <link href="css/bootstrap.css" rel="stylesheet">
  <link href="css/fontawesome-all.css" rel="stylesheet">
  <link href="css/swiper.css" rel="stylesheet">
<link href="css/magnific-popup.css" rel="stylesheet">
<link href="css/styles.css" rel="stylesheet">
  <link rel="stylesheet" href="css/LogIn2.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>

<!-- Favicon  -->
  <link rel="icon" href="images/browser-Icon.png">

</head>
<body data-spy="scroll" data-target=".fixed-top">
    <audio id="myAudio"  loop>
        <source src="images/Medical Examination_short.wav" >
         </audio>
    
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top navbar-dark">
        <div class="container">
            
            <!-- Text Logo - Use this if you don't have a graphic logo -->
            <!-- <a class="navbar-brand logo-text page-scroll" href="index.html">Revo</a> -->
            <!-- Image Logo -->
            <a class="navbar-brand logo-image" href="index.html"><img src="images/Color logo - no background.png" alt="alternative" style="width:75px; height:75px "></a> 
            <p Style="font-size: 24px; text-align: left;">Endo<span style="font-weight: bold; ">Simulate</span></p>
            <button class="navbar-toggler p-0 border-0" type="button" data-toggle="offcanvas">
                <span class="navbar-toggler-icon"></span>
            </button>
                <span class="nav-item social-icons">
                    <span class="fa-stack">
                        <a href="https://github.com/Naira06/EndoSimulate.git">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="fab fa-github fa-stack-1x"></i>
                        </a>
                    </span>
                </span>
            </div> <!-- end of navbar-collapse -->
        </div> <!-- end of container -->
    </nav> <!-- end of navbar -->
    <!-- end of navigation -->
    
    <div class="center">
        <div class="container1">
           <label class="close-btn fas fa-times" title="close"></label>
           <div class="text">
              Login Form
           </div>
           <form id="loginForm">
              <div class="data">
                 <label>Username</label>
                 <input type="text" id="Username" name="Username" placeholder="Enter your username" required>
              </div>
              <div class="data">
                 <label>Password</label>
                 <input type="password" id="Password" name="Password" placeholder="Enter your password" required>
              </div>
              <div class="forgot-pass">
                 <a href="Forgot.html">Forgot Password?</a>
              </div>
              <div class="btn">
                 <div class="inner"></div>
                 <button type="submit">Login</button>
              </div>
              <div class="signup-link">
                 <p class="create">Don't have an account?</p> <a href="Register.html">Sign up now</a>
              </div>
           </form>
        </div>
     </div>
     <script>

        const loginForm = document.getElementById("loginForm");
        loginForm.addEventListener("submit", async (e) => {
          e.preventDefault();
          
          const Username = document.getElementById("Username").value;
          const Password = document.getElementById("Password").value;
          
          const data = {
            Username,
            Password
          };
          
          try {
            const response = await fetch("/login", {
              method: "POST",
              headers: {
                "Content-Type": "application/json"
              },
              body: JSON.stringify(data)
            });
            
            const result = await response.json();
            
            if (response.ok) {
              sessionStorage.setItem("Username",Username);
              alert(result.message); // Show success message
              window.location.href = "Progress.html"; // Redirect after successful login
            } else {
              alert(result.error); // Show error message
            }
          } catch (error) {
            console.error("Error:", error);
            alert("Login failed. Please try again.");
          }
        });

      </script> 
     </body>
  </html>